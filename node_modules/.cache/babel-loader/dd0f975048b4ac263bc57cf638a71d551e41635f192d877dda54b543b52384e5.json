{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\1867319\\\\Documents\\\\GitHub\\\\H-2023-Projet-Synthese\\\\Service_Video\\\\react_js\\\\src\\\\screens\\\\HomeScreen.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { useState, useEffect } from 'react';\nimport Axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\n\n/**\r\n * Représente la page d'Accueil, plus précisement la connexion du compte au site.\r\n * @param {object} props \r\n * @param {() => void} props.setIsLoggedIn callback sur la fonction de state setIsLoggedIn, pour le bool isLoggedIn.\r\n * @returns \r\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction HomeScreen(props) {\n  _s();\n  useEffect(() => {\n    getCaptcha();\n  }, []);\n  const navigate = useNavigate();\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [msgErreur, setMessageErreur] = useState(\"\");\n  const [imgCaptcha, setImgCaptcha] = useState();\n  const [captcha, setCaptcha] = useState();\n  const goToProfil = () => {\n    navigate(\"/profil\");\n  };\n  const goToInscription = () => {\n    navigate(\"/inscription\");\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-1/3\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col white-bx \",\n      children: [\"\\xAD\\xAD\", /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"flex flex-col pb-8 m-10\",\n        onSubmit: e => {\n          login(e);\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center text-4xl mb-8\",\n          children: \"Bienvenue!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Courriel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"border rounded-2xl p-2\",\n          type: \"email\",\n          name: \"nom\",\n          onChange: e => {\n            setUsername(e.target.value);\n          },\n          placeholder: \"Courriel\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Mot de passe\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"border rounded-2xl p-2\",\n          type: \"password\",\n          name: \"motDePasse\",\n          onChange: e => {\n            setPassword(e.target.value);\n          },\n          placeholder: \"Mot de passe\",\n          required: true,\n          minLength: \"6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"bg-white border border-slate-500 hover:bg-gray-200 text-slate-500 font-bold py-2 px-4 rounded-2xl mt-7\",\n          onClick: () => {\n            getCaptcha();\n          },\n          children: \"Renouveler le Captcha\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"py-2 px-4 mt-7\",\n          dangerouslySetInnerHTML: {\n            __html: imgCaptcha\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"border rounded-2xl p-2\",\n          type: \"text\",\n          name: \"captcha\",\n          onChange: e => {\n            setCaptcha(e.target.value);\n          },\n          placeholder: \"Captcha\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"bg-slate-500 hover:bg-slate-700 text-white font-bold py-2 px-4 rounded-2xl mt-7\",\n          type: \"submit\",\n          value: \"Connexion\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"bg-white border border-slate-500 hover:bg-gray-200 text-slate-500 font-bold py-2 px-4 rounded-2xl mt-7\",\n          onClick: () => {\n            goToInscription();\n          },\n          children: \"Inscription\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 17\n      }, this), msgErreur !== null && msgErreur !== void 0 ? msgErreur : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-red-500 font-extrabold text-center\",\n        children: msgErreur\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 31\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 9\n  }, this);\n\n  /**\r\n   * La fonction login permet de tenter d'obtenir une session(connexion back-end) \r\n   * avec l'utilisateur et le mot de passe inscrit dans les champs respectifs.\r\n   * Si c'est un succès, l'utilisateur est transféré avers sa page profil, \r\n   * sinon il est présenté un message d'erreur.\r\n   */\n  function login(e) {\n    e.preventDefault();\n    Axios.post(process.env.REACT_APP_DOMAIN + \"/login\", {\n      courriel: username,\n      motDePasse: password,\n      captcha: captcha\n    }).then(response => {\n      if (response.data.message) {\n        setMessageErreur(response.data.message);\n        getCaptcha();\n      } else {\n        props.handleLogAndRole(true, response.data.role);\n        goToProfil();\n      }\n    });\n  }\n  ;\n\n  /**\r\n   * Retourne un CAPTCHA que l'utilisateur doit vérifier au moment de l'inscription.\r\n   */\n  function getCaptcha() {\n    Axios.get(process.env.REACT_APP_DOMAIN + \"/captcha\", {}).then(response => {\n      if (response.data) {\n        setImgCaptcha(response.data);\n      }\n    });\n  }\n}\n_s(HomeScreen, \"sYf4H68q/ISYzkY4bHpInQOtiw4=\", false, function () {\n  return [useNavigate];\n});\n_c = HomeScreen;\nexport default HomeScreen;\nvar _c;\n$RefreshReg$(_c, \"HomeScreen\");","map":{"version":3,"names":["React","useState","useEffect","Axios","useNavigate","jsxDEV","_jsxDEV","HomeScreen","props","_s","getCaptcha","navigate","username","setUsername","password","setPassword","msgErreur","setMessageErreur","imgCaptcha","setImgCaptcha","captcha","setCaptcha","goToProfil","goToInscription","className","children","onSubmit","e","login","fileName","_jsxFileName","lineNumber","columnNumber","type","name","onChange","target","value","placeholder","required","minLength","onClick","dangerouslySetInnerHTML","__html","preventDefault","post","process","env","REACT_APP_DOMAIN","courriel","motDePasse","then","response","data","message","handleLogAndRole","role","get","_c","$RefreshReg$"],"sources":["C:/Users/1867319/Documents/GitHub/H-2023-Projet-Synthese/Service_Video/react_js/src/screens/HomeScreen.js"],"sourcesContent":["import React from 'react';\r\nimport { useState, useEffect } from 'react';\r\nimport Axios from \"axios\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\n/**\r\n * Représente la page d'Accueil, plus précisement la connexion du compte au site.\r\n * @param {object} props \r\n * @param {() => void} props.setIsLoggedIn callback sur la fonction de state setIsLoggedIn, pour le bool isLoggedIn.\r\n * @returns \r\n */\r\nfunction HomeScreen(props) {\r\n\r\n    useEffect(() => {\r\n        getCaptcha();\r\n    }\r\n        , []);\r\n\r\n    const navigate = useNavigate();\r\n\r\n    const [username, setUsername] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n    const [msgErreur, setMessageErreur] = useState(\"\");\r\n\r\n    const [imgCaptcha, setImgCaptcha] = useState();\r\n    const [captcha, setCaptcha] = useState();\r\n\r\n    const goToProfil = () => { navigate(\"/profil\"); }\r\n    const goToInscription = () => { navigate(\"/inscription\"); }\r\n\r\n    return (\r\n        <div className='w-1/3'>\r\n            <div className=\"flex flex-col white-bx \">­­\r\n\r\n                <form className='flex flex-col pb-8 m-10' onSubmit={(e) => { login(e) }}>\r\n                    <div className='text-center text-4xl mb-8'>Bienvenue!</div>\r\n                    <label>Courriel</label>\r\n                    <input className=\"border rounded-2xl p-2\" type=\"email\" name=\"nom\" onChange={(e) => { setUsername(e.target.value) }} placeholder='Courriel' required />\r\n                    <label>Mot de passe</label>\r\n                    <input className=\"border rounded-2xl p-2\" type=\"password\" name=\"motDePasse\" onChange={(e) => { setPassword(e.target.value) }} placeholder='Mot de passe' required minLength=\"6\" />\r\n\r\n                    <button className='bg-white border border-slate-500 hover:bg-gray-200 text-slate-500 font-bold py-2 px-4 rounded-2xl mt-7' onClick={() => { getCaptcha() }}>Renouveler le Captcha</button>\r\n                    <div className='py-2 px-4 mt-7' dangerouslySetInnerHTML={{ __html: imgCaptcha }}></div>\r\n                    <input className=\"border rounded-2xl p-2\" type=\"text\" name=\"captcha\" onChange={(e) => { setCaptcha(e.target.value) }} placeholder='Captcha' required />\r\n\r\n                    <input className='bg-slate-500 hover:bg-slate-700 text-white font-bold py-2 px-4 rounded-2xl mt-7' type='submit' value=\"Connexion\" />\r\n                    <button className='bg-white border border-slate-500 hover:bg-gray-200 text-slate-500 font-bold py-2 px-4 rounded-2xl mt-7' onClick={() => { goToInscription() }}>Inscription</button>\r\n                </form>\r\n\r\n                {msgErreur ?? <div className='text-red-500 font-extrabold text-center'>{msgErreur}</div>}\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    /**\r\n     * La fonction login permet de tenter d'obtenir une session(connexion back-end) \r\n     * avec l'utilisateur et le mot de passe inscrit dans les champs respectifs.\r\n     * Si c'est un succès, l'utilisateur est transféré avers sa page profil, \r\n     * sinon il est présenté un message d'erreur.\r\n     */\r\n    function login(e) {\r\n        e.preventDefault();\r\n        Axios.post(process.env.REACT_APP_DOMAIN + \"/login\", {\r\n            courriel: username,\r\n            motDePasse: password,\r\n            captcha: captcha\r\n        }).then((response) => {\r\n            if (response.data.message) {\r\n                setMessageErreur(response.data.message);\r\n                getCaptcha();\r\n            } else {\r\n                props.handleLogAndRole(true, response.data.role);\r\n                goToProfil();\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Retourne un CAPTCHA que l'utilisateur doit vérifier au moment de l'inscription.\r\n     */\r\n    function getCaptcha() {\r\n        Axios.get(process.env.REACT_APP_DOMAIN + \"/captcha\", {\r\n        }).then((response) => {\r\n            if (response.data) {\r\n                setImgCaptcha(response.data);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default HomeScreen;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}